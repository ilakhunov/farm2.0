# –§–∞–∑–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** 2025-11-13  
**–°—Ç–∞—Ç—É—Å:** Backend –∑–∞–≤–µ—Ä—à–µ–Ω, Mobile –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (Backend)

### 1. –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### Favorite (–ò–∑–±—Ä–∞–Ω–Ω–æ–µ)
- `user_id` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `product_id` - —Ç–æ–≤–∞—Ä
- `created_at` - –¥–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –Ω–∞ (user_id, product_id)

#### ViewHistory (–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤)
- `user_id` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `product_id` - —Ç–æ–≤–∞—Ä
- `viewed_at` - –≤—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

#### Rating (–†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã)
- `user_id` - –∞–≤—Ç–æ—Ä –æ—Ç–∑—ã–≤–∞
- `rating_type` - —Ç–∏–ø (product/seller)
- `product_id` –∏–ª–∏ `seller_id` - –æ–±—ä–µ–∫—Ç —Ä–µ–π—Ç–∏–Ω–≥–∞
- `rating` - –æ—Ü–µ–Ω–∫–∞ (1-5)
- `comment` - —Ç–µ–∫—Å—Ç –æ—Ç–∑—ã–≤–∞
- `images` - –º–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JSON)
- `is_approved` - –º–æ–¥–µ—Ä–∞—Ü–∏—è
- `reply` - –æ—Ç–≤–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü–∞
- `replied_at` - –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞

#### Product (–û–±–Ω–æ–≤–ª–µ–Ω–æ)
- `image_urls` - –º–∞—Å—Å–∏–≤ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (JSON)

---

### 2. API Endpoints

#### –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (`/api/v1/favorites`)
- `POST /api/v1/favorites` - –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
- `DELETE /api/v1/favorites/{product_id}` - —É–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
- `GET /api/v1/favorites` - —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/v1/favorites/check/{product_id}` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

#### –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ (`/api/v1/view-history`)
- `POST /api/v1/view-history/{product_id}` - –∑–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
- `GET /api/v1/view-history` - –ø–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- `DELETE /api/v1/view-history` - –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é

#### –†–µ–π—Ç–∏–Ω–≥–∏ (`/api/v1/ratings`)
- `POST /api/v1/ratings` - —Å–æ–∑–¥–∞—Ç—å —Ä–µ–π—Ç–∏–Ω–≥/–æ—Ç–∑—ã–≤
- `GET /api/v1/ratings/product/{product_id}` - —Ä–µ–π—Ç–∏–Ω–≥–∏ —Ç–æ–≤–∞—Ä–∞
- `GET /api/v1/ratings/product/{product_id}/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–≤–∞—Ä–∞
- `GET /api/v1/ratings/seller/{seller_id}/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–≤—Ü–∞
- `PATCH /api/v1/ratings/{rating_id}/reply` - –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ—Ç–∑—ã–≤

---

### 3. –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

#### FavoriteResponse
```python
{
    "id": "uuid",
    "user_id": "uuid",
    "product_id": "uuid",
    "product": ProductResponse,  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    "created_at": "datetime"
}
```

#### RatingResponse
```python
{
    "id": "uuid",
    "user_id": "uuid",
    "rating_type": "product" | "seller",
    "product_id": "uuid" | null,
    "seller_id": "uuid" | null,
    "rating": 1-5,
    "comment": "string" | null,
    "images": ["url1", "url2"] | null,
    "is_approved": bool,
    "reply": "string" | null,
    "replied_at": "datetime" | null,
    "created_at": "datetime",
    "updated_at": "datetime"
}
```

#### RatingStats
```python
{
    "average_rating": 4.5,
    "total_ratings": 100,
    "rating_distribution": {
        "1": 5,
        "2": 10,
        "3": 20,
        "4": 30,
        "5": 35
    }
}
```

---

## üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (Mobile App)

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:

1. **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ**
   - –ö–Ω–æ–ø–∫–∞ "–í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞
   - –≠–∫—Ä–∞–Ω "–ú–æ–∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–µ"
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

2. **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–ø–∏—Å—å –ø—Ä–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ —Ç–æ–≤–∞—Ä–∞
   - –≠–∫—Ä–∞–Ω "–ù–µ–¥–∞–≤–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ"
   - –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏

3. **–†–µ–π—Ç–∏–Ω–≥–∏ –∏ –æ—Ç–∑—ã–≤—ã**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞
   - –≠–∫—Ä–∞–Ω –æ—Ç–∑—ã–≤–æ–≤ —Ç–æ–≤–∞—Ä–∞
   - –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ –∫ –æ—Ç–∑—ã–≤—É
   - –û—Ç–≤–µ—Ç—ã –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –Ω–∞ –æ—Ç–∑—ã–≤—ã

4. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è**
   - –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–∞
   - Swiper –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
   - –ú–∏–Ω–∏–∞—Ç—é—Ä—ã

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

### –î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
```bash
POST /api/v1/favorites
Authorization: Bearer <token>
{
    "product_id": "uuid"
}
```

### –ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä
```bash
POST /api/v1/view-history/{product_id}
Authorization: Bearer <token>
```

### –°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤
```bash
POST /api/v1/ratings
Authorization: Bearer <token>
{
    "rating_type": "product",
    "product_id": "uuid",
    "rating": 5,
    "comment": "–û—Ç–ª–∏—á–Ω—ã–π —Ç–æ–≤–∞—Ä!",
    "images": ["url1", "url2"]
}
```

### –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä–µ–π—Ç–∏–Ω–≥–æ–≤
```bash
GET /api/v1/ratings/product/{product_id}/stats
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Backend API - –∑–∞–≤–µ—Ä—à–µ–Ω–æ
2. üîÑ Mobile App UI - –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ
3. ‚è∏Ô∏è Admin Panel - –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏—é –æ—Ç–∑—ã–≤–æ–≤
4. ‚è∏Ô∏è –¢–µ—Å—Ç—ã - –¥–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö endpoints
5. ‚è∏Ô∏è –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - –æ–±–Ω–æ–≤–∏—Ç—å Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

**–ü—Ä–æ–≥—Ä–µ—Å—Å:** 50% (Backend –≥–æ—Ç–æ–≤, Mobile –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)

